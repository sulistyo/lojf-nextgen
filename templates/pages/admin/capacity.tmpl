{{define "content"}}
<h1 class="text-2xl font-bold mb-4">Admin â€¢ Capacity</h1>
{{template "admin_nav" .}}

<form method="GET" class="bg-white p-4 border rounded-2xl grid md:grid-cols-4 gap-3 mb-4">
  <div>
    <label class="block text-xs text-gray-600 mb-1">From</label>
    <input type="date" name="from" value="{{.From}}" class="w-full rounded-xl border p-2">
  </div>
  <div>
    <label class="block text-xs text-gray-600 mb-1">To</label>
    <input type="date" name="to" value="{{.To}}" class="w-full rounded-xl border p-2">
  </div>
  <div class="flex items-end">
    <button class="px-3 py-2 rounded-xl bg-gray-900 text-white">Apply</button>
  </div>
</form>

<div class="grid md:grid-cols-4 gap-3 mb-4">
  <div class="bg-white border rounded-2xl p-4">
    <div class="text-xs text-gray-500">Classes</div>
    <div class="text-2xl font-semibold">{{.Summary.Classes}}</div>
  </div>
  <div class="bg-white border rounded-2xl p-4">
    <div class="text-xs text-gray-500">Capacity</div>
    <div class="text-2xl font-semibold">{{.Summary.Capacity}}</div>
  </div>
  <div class="bg-white border rounded-2xl p-4">
    <div class="text-xs text-gray-500">Confirmed</div>
    <div class="text-2xl font-semibold">{{.Summary.Confirmed}}</div>
  </div>
  <div class="bg-white border rounded-2xl p-4">
    <div class="text-xs text-gray-500">Checked-in</div>
    <div class="text-2xl font-semibold">{{.Summary.CheckedIn}}</div>
  </div>
</div>

<div class="bg-white border rounded-2xl overflow-x-auto">
  <table class="w-full text-sm">
    <thead class="text-left text-gray-500">
      <tr>
        <th class="py-2 px-3">Date</th>
        <th class="py-2 px-3">Class</th>
        <th class="py-2 px-3">Capacity</th>
        <th class="py-2 px-3">Confirmed</th>
        <th class="py-2 px-3">Waitlisted</th>
        <th class="py-2 px-3">Checked-in</th>
        <th class="py-2 px-3">Available</th>
        <th class="py-2 px-3">Fill</th>
      </tr>
    </thead>
    <tbody>
      {{range .Rows}}
      <tr class="border-t">
        <td class="py-2 px-3 whitespace-nowrap">{{.DateStr}}</td>
        <td class="py-2 px-3">{{.ClassName}}</td>
        <td class="py-2 px-3">{{.Capacity}}</td>
        <td class="py-2 px-3">{{.Confirmed}}</td>
        <td class="py-2 px-3">{{.Waitlisted}}</td>
        <td class="py-2 px-3">{{.CheckedIn}}</td>
        <td class="py-2 px-3">{{.Available}}</td>
        <td class="py-2 px-3 w-64">
          <div class="w-full bg-gray-100 rounded-full h-2">
            <div class="h-2 rounded-full bg-gray-900" style="width: {{.FillPercent}}%"></div>
          </div>
          <div class="text-xs text-gray-500 mt-1">{{.FillPercent}}%</div>
        </td>
      </tr>
      {{end}}
    </tbody>
  </table>
</div>
{{end}}
{{define "admin/capacity.tmpl"}}{{template "base" .}}{{end}}
